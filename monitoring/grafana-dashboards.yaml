apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  namespace: monitoring
data:
  api-service-dashboard.json: |
    {
      "dashboard": {
        "title": "API Service Dashboard",
        "panels": [
          {
            "title": "HTTP Requests Rate",
            "targets": [{
              "expr": "rate(http_requests_total{service=\"api-service\"}[5m])",
              "legendFormat": "{{method}} {{endpoint}}"
            }]
          },
          {
            "title": "Error Rate",
            "targets": [{
              "expr": "rate(http_requests_total{service=\"api-service\", status=~\"5..\"}[5m]) / rate(http_requests_total{service=\"api-service\"}[5m]) * 100"
            }]
          }
        ]
      }
    }